 version: 2
 jobs:
    build:
        docker:
               - image: circleci/node:10
        steps:
           - checkout
           - add_ssh_keys:
              fingerprints:
                - "S95:40:36:d5:16:09:57:fe:bf:cc:01:3f:18:d5:5c:a8"
           - run: 
                name: "source build"
                command: |
                    echo "A first hello"
                    touch miarchivo
                    ls
                    echo "mensaje 2"

           - persist_to_workspace:
              # Must be an absolute path, or relative path from working_directory. This is a directory on the container which is 
              # taken to be the root directory of the workspace.
              root: /home/circleci
              # Must be relative path from root
              paths:
                - ./project
          
                
    pruebaHTML:
        docker:
               - image: circleci/node:10
        steps:
           - attach_workspace:
              # Must be absolute path or relative path from working_directory
              at: /home/circleci


           - checkout
           - add_ssh_keys:
              fingerprints:
                - "S95:40:36:d5:16:09:57:fe:bf:cc:01:3f:18:d5:5c:a8"
           - run: 
                name: "prueba docker"
                command: |
                    echo "esto testea el codigo html"
                    ls
                    pwd
                    #scp -o StrictHostKeyChecking=no ./index.html ubuntu@54.147.168.65:/var/www/html
                    
                    
                    
    HTMLservidor-des:
        docker:
               - image: circleci/node:10
        steps:
           - attach_workspace:
              # Must be absolute path or relative path from working_directory
              at: /home/circleci


           - checkout
           - add_ssh_keys:
              fingerprints:
                - "S95:40:36:d5:16:09:57:fe:bf:cc:01:3f:18:d5:5c:a8"
           - run: 
                name: "prueba docker"
                command: |
                    echo "esto sube al servidor de desarrollo"
                    ls
                    pwd
                    #scp -o StrictHostKeyChecking=no ./index.html ubuntu@54.147.168.65:/var/www/html    


    HTMLproduccion:
        docker:
               - image: circleci/node:10
        steps:
           - attach_workspace:
              # Must be absolute path or relative path from working_directory
              at: /home/circleci


           - checkout
           - add_ssh_keys:
              fingerprints:
                - "S95:40:36:d5:16:09:57:fe:bf:cc:01:3f:18:d5:5c:a8"
           - run: 
                name: "prueba docker"
                command: |
                    echo "esto sube el codigo a los servidores de produccion despues de confirmacion"
                    ls
                    pwd
                    #scp -o StrictHostKeyChecking=no ./index.html ubuntu@54.147.168.65:/var/www/html                     
                    
                    
 workflows:
     version: 2
     test1:
         jobs:
          - build
          - pruebaHTML:
              requires:
                - build
                

        